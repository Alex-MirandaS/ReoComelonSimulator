<mat-card>
  <mat-card-title>Registro Ingredientes + Caja</mat-card-title>
  <mat-card-content>
    <form [formGroup]="ingredienteForm" (ngSubmit)="submitBoth()">
      <div style="display:flex; gap:24px; flex-wrap:wrap">

        <!-- Ingrediente -->
        <div style="flex:1; min-width:300px">
          <h3>Ingrediente</h3>
          <mat-form-field style="width:100%" appearance="fill">
            <mat-label>Nombre Ingrediente</mat-label>
            <input matInput formControlName="ingrediente">
          </mat-form-field>
          <mat-form-field style="width:100%" appearance="fill">
            <mat-label>Vida útil (días)</mat-label>
            <input matInput type="number" formControlName="vida_util_dias">
          </mat-form-field>
        </div>

        <!-- Caja -->
        <div style="flex:1; min-width:300px">
          <h3>Caja Ingredientes</h3>
          <mat-form-field style="width:100%" appearance="fill">
            <mat-label>Ocupación de Caja (m³)</mat-label>
            <mat-select formControlName="id_ocupacion_caja">
              <mat-option *ngFor="let oc of ocupacionesCaja" [value]="oc.id">
                {{oc.ocupacion}}
              </mat-option>
            </mat-select>
          </mat-form-field>

          <mat-form-field style="width:100%" appearance="fill">
            <mat-label>Cantidad del Ingrediente en Caja</mat-label>
            <input matInput type="number" formControlName="cantidad">
          </mat-form-field>

          <mat-form-field style="width:100%" appearance="fill">
            <mat-label>Precio</mat-label>
            <input matInput type="number" formControlName="precio">
          </mat-form-field>
        </div>

      </div>

      <div style="margin-top:12px">
        <button mat-raised-button color="primary" type="submit">Crear Ingrediente + Caja</button>
      </div>
    </form>
  </mat-card-content>
</mat-card>

<!-- Tablas lado a lado -->
<div style="display:flex; gap:24px; flex-wrap:wrap; margin-top:16px">

  <!-- Tabla Ingredientes -->
  <mat-card style="flex:1; min-width:300px">
    <mat-card-title>Ingredientes</mat-card-title>
    <mat-card-content>
      <table mat-table [dataSource]="ingredientes" class="mat-elevation-z8" *ngIf="ingredientes.length > 0">

        <!-- ID -->
        <ng-container matColumnDef="id">
          <th mat-header-cell *matHeaderCellDef> ID </th>
          <td mat-cell *matCellDef="let i"> {{i.id}} </td>
        </ng-container>

        <!-- Ingrediente -->
        <ng-container matColumnDef="ingrediente">
          <th mat-header-cell *matHeaderCellDef> Ingrediente </th>
          <td mat-cell *matCellDef="let i"> {{i.ingrediente}} </td>
        </ng-container>

        <!-- Vida útil -->
        <ng-container matColumnDef="vida_util_dias">
          <th mat-header-cell *matHeaderCellDef> Vida útil (días) </th>
          <td mat-cell *matCellDef="let i"> {{i.vida_util_dias}} </td>
        </ng-container>

        <!-- Cantidad -->
        <ng-container matColumnDef="cantidad">
          <th mat-header-cell *matHeaderCellDef> Cantidad </th>
          <td mat-cell *matCellDef="let i"> {{i.cantidad}} </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="['id','ingrediente','vida_util_dias','cantidad']"></tr>
        <tr mat-row *matRowDef="let row; columns: ['id','ingrediente','vida_util_dias','cantidad'];"></tr>
      </table>

      <div *ngIf="ingredientes.length === 0" style="text-align:center; margin-top:8px">
        No hay ingredientes registrados.
      </div>
    </mat-card-content>
  </mat-card>

  <!-- Tabla Cajas -->
  <mat-card style="flex:1; min-width:300px">
    <mat-card-title>Cajas</mat-card-title>
    <mat-card-content>
      <table mat-table [dataSource]="cajas" class="mat-elevation-z8" *ngIf="cajas.length > 0">

        <!-- ID -->
        <ng-container matColumnDef="id">
          <th mat-header-cell *matHeaderCellDef> ID </th>
          <td mat-cell *matCellDef="let c"> {{c.id}} </td>
        </ng-container>

        <!-- Ocupación Caja -->
        <ng-container matColumnDef="ocupacionCaja">
          <th mat-header-cell *matHeaderCellDef> Ocupación de Caja (m³) </th>
          <td mat-cell *matCellDef="let c"> {{c.ocupacionCaja?.ocupacion}} </td>
        </ng-container>

        <!-- Ingrediente -->
        <ng-container matColumnDef="ingrediente">
          <th mat-header-cell *matHeaderCellDef> Ingrediente </th>
          <td mat-cell *matCellDef="let c"> {{c.ingrediente?.ingrediente}} </td>
        </ng-container>

        <!-- Cantidad -->
        <ng-container matColumnDef="cantidad">
          <th mat-header-cell *matHeaderCellDef> Cantidad </th>
          <td mat-cell *matCellDef="let c"> {{c.cantidad}} </td>
        </ng-container>

        <!-- Precio -->
        <ng-container matColumnDef="precio">
          <th mat-header-cell *matHeaderCellDef> Precio </th>
          <td mat-cell *matCellDef="let c"> {{c.precio}} </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="['id','ocupacionCaja','ingrediente','cantidad','precio']"></tr>
        <tr mat-row *matRowDef="let row; columns: ['id','ocupacionCaja','ingrediente','cantidad','precio'];"></tr>
      </table>

      <div *ngIf="cajas.length === 0" style="text-align:center; margin-top:8px">
        No hay cajas registradas.
      </div>
    </mat-card-content>
  </mat-card>

</div>
